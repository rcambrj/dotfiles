table inet fw4 {
	chain input {
		type filter hook input priority filter; policy accept;
		iifname "lo" accept comment "!fw4: Accept traffic from loopback"
		ct state established,related accept comment "!fw4: Allow inbound established and related flows"
		tcp flags syn / fin,syn,rst,ack jump syn_flood comment "!fw4: Rate limit TCP syn packets"
		iifname { "br-lan", "br-mgmt" } jump input_lan comment "!fw4: Handle lan IPv4/IPv6 input traffic"
		iifname { "br-lte", "pppoe-wan" } jump input_wan comment "!fw4: Handle wan IPv4/IPv6 input traffic"
		iifname "docker0" jump input_docker comment "!fw4: Handle docker IPv4/IPv6 input traffic"
		iifname "wt0" jump input_netbird comment "!fw4: Handle netbird IPv4/IPv6 input traffic"
	}

	chain forward {
		type filter hook forward priority filter; policy drop;
		ct state established,related accept comment "!fw4: Allow forwarded established and related flows"
		meta l4proto tcp oifname "br-lte" ip daddr 192.168.44.1 counter packets 150 bytes 9600 jump accept_to_wan comment "!fw4: permit traffic to LTE router (forward)"
		meta l4proto udp oifname "br-lte" ip daddr 192.168.44.1 counter packets 0 bytes 0 jump accept_to_wan comment "!fw4: permit traffic to LTE router (forward)"
		meta l4proto tcp oifname "br-lte" counter packets 0 bytes 0 jump reject_to_wan comment "!fw4: block wan_lte traffic (forward)"
		meta l4proto udp oifname "br-lte" counter packets 0 bytes 0 jump reject_to_wan comment "!fw4: block wan_lte traffic (forward)"
		iifname { "br-lan", "br-mgmt" } jump forward_lan comment "!fw4: Handle lan IPv4/IPv6 forward traffic"
		iifname { "br-lte", "pppoe-wan" } jump forward_wan comment "!fw4: Handle wan IPv4/IPv6 forward traffic"
		iifname "docker0" jump forward_docker comment "!fw4: Handle docker IPv4/IPv6 forward traffic"
		iifname "wt0" jump forward_netbird comment "!fw4: Handle netbird IPv4/IPv6 forward traffic"
		jump upnp_forward comment "Hook into miniupnpd forwarding chain"
		jump handle_reject
	}

	chain output {
		type filter hook output priority filter; policy accept;
		oifname "lo" accept comment "!fw4: Accept traffic towards loopback"
		ct state established,related accept comment "!fw4: Allow outbound established and related flows"
		oifname { "br-lan", "br-mgmt" } jump output_lan comment "!fw4: Handle lan IPv4/IPv6 output traffic"
		oifname { "br-lte", "pppoe-wan" } jump output_wan comment "!fw4: Handle wan IPv4/IPv6 output traffic"
		oifname "docker0" jump output_docker comment "!fw4: Handle docker IPv4/IPv6 output traffic"
		oifname "wt0" jump output_netbird comment "!fw4: Handle netbird IPv4/IPv6 output traffic"
	}

	chain prerouting {
		type filter hook prerouting priority filter; policy accept;
		iifname { "br-lan", "br-mgmt" } jump helper_lan comment "!fw4: Handle lan IPv4/IPv6 helper assignment"
		iifname "docker0" jump helper_docker comment "!fw4: Handle docker IPv4/IPv6 helper assignment"
		iifname "wt0" jump helper_netbird comment "!fw4: Handle netbird IPv4/IPv6 helper assignment"
	}

	chain handle_reject {
		meta l4proto tcp reject with tcp reset comment "!fw4: Reject TCP traffic"
		reject comment "!fw4: Reject any other traffic"
	}

	chain syn_flood {
		limit rate 25/second burst 50 packets return comment "!fw4: Accept SYN packets below rate-limit"
		drop comment "!fw4: Drop excess packets"
	}

	chain input_lan {
		tcp dport 6926 counter packets 48612 bytes 2916720 accept comment "!fw4: mwan3 status"
		ct status dnat accept comment "!fw4: Accept port redirections"
		jump accept_from_lan
	}

	chain output_lan {
		jump accept_to_lan
	}

	chain forward_lan {
		ip saddr 192.168.142.74 counter packets 2521 bytes 110924 jump reject_to_wan comment "!fw4: Deny Solar to Internet"
		jump accept_to_wan comment "!fw4: Accept lan to wan forwarding"
		jump accept_to_netbird comment "!fw4: Accept lan to netbird forwarding"
		ct status dnat accept comment "!fw4: Accept port forwards"
		jump accept_to_lan
	}

	chain helper_lan {
	}

	chain accept_from_lan {
		iifname { "br-lan", "br-mgmt" } counter packets 523684 bytes 77038068 accept comment "!fw4: accept lan IPv4/IPv6 traffic"
	}

	chain accept_to_lan {
		oifname { "br-lan", "br-mgmt" } counter packets 942932 bytes 400833682 accept comment "!fw4: accept lan IPv4/IPv6 traffic"
	}

	chain input_wan {
		meta nfproto ipv4 udp dport 68 counter packets 0 bytes 0 accept comment "!fw4: Allow-DHCP-Renew"
		icmp type echo-request counter packets 427 bytes 16417 accept comment "!fw4: Allow-Ping"
		meta nfproto ipv4 meta l4proto igmp counter packets 1818 bytes 58176 accept comment "!fw4: Allow-IGMP"
		meta nfproto ipv6 udp dport 546 counter packets 3 bytes 636 accept comment "!fw4: Allow-DHCPv6"
		ip6 saddr fe80::/10 icmpv6 type . icmpv6 code { mld-listener-query . no-route, mld-listener-report . no-route, mld-listener-done . no-route, mld2-listener-report . no-route } counter packets 7272 bytes 523584 accept comment "!fw4: Allow-MLD"
		icmpv6 type { destination-unreachable, time-exceeded, echo-request, echo-reply, nd-router-solicit, nd-router-advert } limit rate 1000/second counter packets 0 bytes 0 accept comment "!fw4: Allow-ICMPv6-Input"
		icmpv6 type . icmpv6 code { packet-too-big . no-route, parameter-problem . no-route, nd-neighbor-solicit . no-route, nd-neighbor-advert . no-route, parameter-problem . admin-prohibited } limit rate 1000/second counter packets 0 bytes 0 accept comment "!fw4: Allow-ICMPv6-Input"
		tcp dport 51820 counter packets 0 bytes 0 accept comment "!fw4: netbird"
		udp dport 51820 counter packets 0 bytes 0 accept comment "!fw4: netbird"
		ct status dnat accept comment "!fw4: Accept port redirections"
		jump reject_from_wan
	}

	chain output_wan {
		meta l4proto tcp oifname "br-lte" ip daddr 192.168.44.1 counter packets 0 bytes 0 jump accept_to_wan comment "!fw4: permit traffic to LTE router (output)"
		meta l4proto udp oifname "br-lte" ip daddr 192.168.44.1 counter packets 0 bytes 0 jump accept_to_wan comment "!fw4: permit traffic to LTE router (output)"
		meta l4proto tcp oifname "br-lte" counter packets 0 bytes 0 jump reject_to_wan comment "!fw4: block wan_lte traffic (output)"
		meta l4proto udp oifname "br-lte" counter packets 0 bytes 0 jump reject_to_wan comment "!fw4: block wan_lte traffic (output)"
		jump accept_to_wan
	}

	chain forward_wan {
		icmpv6 type { destination-unreachable, time-exceeded, echo-request, echo-reply } limit rate 1000/second counter packets 0 bytes 0 accept comment "!fw4: Allow-ICMPv6-Forward"
		icmpv6 type . icmpv6 code { packet-too-big . no-route, parameter-problem . no-route, parameter-problem . admin-prohibited } limit rate 1000/second counter packets 0 bytes 0 accept comment "!fw4: Allow-ICMPv6-Forward"
		ct status dnat accept comment "!fw4: Accept port forwards"
		jump reject_to_wan
	}

	chain accept_to_wan {
		meta nfproto ipv4 oifname { "br-lte", "pppoe-wan" } ct state invalid counter packets 10775 bytes 550264 drop comment "!fw4: Prevent NAT leakage"
		oifname { "br-lte", "pppoe-wan" } counter packets 706727 bytes 96015874 accept comment "!fw4: accept wan IPv4/IPv6 traffic"
	}

	chain reject_from_wan {
		iifname { "br-lte", "pppoe-wan" } counter packets 81940 bytes 3704988 jump handle_reject comment "!fw4: reject wan IPv4/IPv6 traffic"
	}

	chain reject_to_wan {
		oifname { "br-lte", "pppoe-wan" } counter packets 2521 bytes 110924 jump handle_reject comment "!fw4: reject wan IPv4/IPv6 traffic"
	}

	chain input_docker {
		jump accept_from_docker
	}

	chain output_docker {
		jump accept_to_docker
	}

	chain forward_docker {
		jump accept_to_docker
	}

	chain helper_docker {
	}

	chain accept_from_docker {
		iifname "docker0" counter packets 0 bytes 0 accept comment "!fw4: accept docker IPv4/IPv6 traffic"
	}

	chain accept_to_docker {
		oifname "docker0" counter packets 0 bytes 0 accept comment "!fw4: accept docker IPv4/IPv6 traffic"
	}

	chain input_netbird {
		jump accept_from_netbird
	}

	chain output_netbird {
		jump accept_to_netbird
	}

	chain forward_netbird {
		jump accept_to_lan comment "!fw4: Accept netbird to lan forwarding"
		jump accept_to_wan comment "!fw4: Accept netbird to wan forwarding"
		jump accept_to_netbird
	}

	chain helper_netbird {
	}

	chain accept_from_netbird {
		iifname "wt0" counter packets 72 bytes 4836 accept comment "!fw4: accept netbird IPv4/IPv6 traffic"
	}

	chain accept_to_netbird {
		oifname "wt0" counter packets 119927 bytes 7198487 accept comment "!fw4: accept netbird IPv4/IPv6 traffic"
	}

	chain dstnat {
		type nat hook prerouting priority dstnat; policy accept;
		iifname { "br-lan", "br-mgmt" } jump dstnat_lan comment "!fw4: Handle lan IPv4/IPv6 dstnat traffic"
		iifname { "br-lte", "pppoe-wan" } jump dstnat_wan comment "!fw4: Handle wan IPv4/IPv6 dstnat traffic"
		jump upnp_prerouting comment "Hook into miniupnpd prerouting chain"
	}

	chain srcnat {
		type nat hook postrouting priority srcnat; policy accept;
		oifname { "br-lan", "br-mgmt" } jump srcnat_lan comment "!fw4: Handle lan IPv4/IPv6 srcnat traffic"
		oifname { "br-lte", "pppoe-wan" } jump srcnat_wan comment "!fw4: Handle wan IPv4/IPv6 srcnat traffic"
		jump upnp_postrouting comment "Hook into miniupnpd postrouting chain"
	}

	chain dstnat_lan {
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } tcp dport 443 dnat ip to 192.168.142.50:443 comment "!fw4: https (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } udp dport 443 dnat ip to 192.168.142.50:443 comment "!fw4: https (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } tcp dport 27015-27016 dnat ip to 192.168.142.26:27015-27016 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } udp dport 27015-27016 dnat ip to 192.168.142.26:27015-27016 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } tcp dport 33540 dnat ip to 192.168.142.26:33540 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr { 192.168.44.2, 213.10.4.158 } udp dport 33540 dnat ip to 192.168.142.26:33540 comment "!fw4: wreckfest game (reflection)"
	}

	chain srcnat_lan {
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.50 tcp dport 443 snat ip to 192.168.142.1 comment "!fw4: https (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.50 udp dport 443 snat ip to 192.168.142.1 comment "!fw4: https (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.26 tcp dport 27015-27016 snat ip to 192.168.142.1 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.26 udp dport 27015-27016 snat ip to 192.168.142.1 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.26 tcp dport 33540 snat ip to 192.168.142.1 comment "!fw4: wreckfest game (reflection)"
		ip saddr { 192.168.1.0/24, 192.168.142.0/24 } ip daddr 192.168.142.26 udp dport 33540 snat ip to 192.168.142.1 comment "!fw4: wreckfest game (reflection)"
	}

	chain dstnat_wan {
		meta nfproto ipv4 tcp dport 443 counter packets 11632 bytes 693642 dnat ip to 192.168.142.50:443 comment "!fw4: https"
		meta nfproto ipv4 udp dport 443 counter packets 11 bytes 6125 dnat ip to 192.168.142.50:443 comment "!fw4: https"
		meta nfproto ipv4 tcp dport 27015-27016 counter packets 6 bytes 248 dnat ip to 192.168.142.26:27015-27016 comment "!fw4: wreckfest game"
		meta nfproto ipv4 udp dport 27015-27016 counter packets 9 bytes 460 dnat ip to 192.168.142.26:27015-27016 comment "!fw4: wreckfest game"
		meta nfproto ipv4 tcp dport 33540 counter packets 0 bytes 0 dnat ip to 192.168.142.26:33540 comment "!fw4: wreckfest game"
		meta nfproto ipv4 udp dport 33540 counter packets 0 bytes 0 dnat ip to 192.168.142.26:33540 comment "!fw4: wreckfest game"
	}

	chain srcnat_wan {
		meta nfproto ipv4 masquerade comment "!fw4: Masquerade IPv4 wan traffic"
	}

	chain raw_prerouting {
		type filter hook prerouting priority raw; policy accept;
	}

	chain raw_output {
		type filter hook output priority raw; policy accept;
	}

	chain mangle_prerouting {
		type filter hook prerouting priority mangle; policy accept;
	}

	chain mangle_postrouting {
		type filter hook postrouting priority mangle; policy accept;
	}

	chain mangle_input {
		type filter hook input priority mangle; policy accept;
	}

	chain mangle_output {
		type route hook output priority mangle; policy accept;
	}

	chain mangle_forward {
		type filter hook forward priority mangle; policy accept;
		iifname { "br-lte", "pppoe-wan" } tcp flags syn tcp option maxseg size set rt mtu comment "!fw4: Zone wan IPv4/IPv6 ingress MTU fixing"
		oifname { "br-lte", "pppoe-wan" } tcp flags syn tcp option maxseg size set rt mtu comment "!fw4: Zone wan IPv4/IPv6 egress MTU fixing"
	}

	chain upnp_forward {
	}

	chain upnp_prerouting {
	}

	chain upnp_postrouting {
	}
}
# Warning: table ip mangle is managed by iptables-nft, do not touch!
table ip mangle {
	chain mwan3_ifaces_in {
		meta mark & 0x00003f00 == 0x00000000 counter packets 10159325 bytes 779980919 jump mwan3_iface_in_wan_lte
		meta mark & 0x00003f00 == 0x00000000 counter packets 10156883 bytes 779726644 jump mwan3_iface_in_wan
	}

	chain mwan3_custom_ipv4 {
		xt match "set" counter packets 0 bytes 0 xt target "MARK"
	}

	chain mwan3_connected_ipv4 {
		xt match "set" counter packets 7348328 bytes 584431515 xt target "MARK"
	}

	chain mwan3_dynamic_ipv4 {
		xt match "set" counter packets 0 bytes 0 xt target "MARK"
	}

	chain mwan3_rules {
		meta mark & 0x00003f00 == 0x00000000 counter packets 2451162 bytes 252705414 jump mwan3_policy_balanced
	}

	chain mwan3_hook {
		meta mark & 0x00003f00 == 0x00000000 counter packets 508036663 bytes 327078224123 xt target "CONNMARK"
		meta mark & 0x00003f00 == 0x00000000 counter packets 10159351 bytes 779982747 jump mwan3_ifaces_in
		meta mark & 0x00003f00 == 0x00000000 counter packets 9697095 bytes 756213586 jump mwan3_custom_ipv4
		meta mark & 0x00003f00 == 0x00000000 counter packets 9697095 bytes 756213586 jump mwan3_connected_ipv4
		meta mark & 0x00003f00 == 0x00000000 counter packets 2451162 bytes 252705414 jump mwan3_dynamic_ipv4
		meta mark & 0x00003f00 == 0x00000000 counter packets 2451162 bytes 252705414 jump mwan3_rules
		counter packets 509672065 bytes 328613821892 xt target "CONNMARK"
		meta mark & 0x00003f00 != 0x00003f00 counter packets 362640801 bytes 288269623827 jump mwan3_custom_ipv4
		meta mark & 0x00003f00 != 0x00003f00 counter packets 362640801 bytes 288269623827 jump mwan3_connected_ipv4
		meta mark & 0x00003f00 != 0x00003f00 counter packets 362538406 bytes 288188700484 jump mwan3_dynamic_ipv4
	}

	chain PREROUTING {
		type filter hook prerouting priority mangle; policy accept;
		counter packets 428888171 bytes 305267094803 jump mwan3_hook
	}

	chain OUTPUT {
		type route hook output priority mangle; policy accept;
		counter packets 80783894 bytes 23346727089 jump mwan3_hook
	}

	chain mwan3_policy_balanced {
		meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 1002330 bytes 99008581 xt target "MARK"
	}

	chain mwan3_iface_in_wan_lte {
		iifname "br-lte" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 0 bytes 0 xt target "MARK"
		iifname "br-lte" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 68 bytes 20808 xt target "MARK"
		iifname "br-lte" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 0 bytes 0 xt target "MARK"
		iifname "br-lte" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 300 bytes 79074 xt target "MARK"
	}

	chain mwan3_iface_in_wan {
		iifname "pppoe-wan" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 0 bytes 0 xt target "MARK"
		iifname "pppoe-wan" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 0 bytes 0 xt target "MARK"
		iifname "pppoe-wan" xt match "set" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 0 bytes 0 xt target "MARK"
		iifname "pppoe-wan" meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 136929 bytes 6609039 xt target "MARK"
	}
}
# Warning: table ip6 mangle is managed by iptables-nft, do not touch!
table ip6 mangle {
	chain mwan3_ifaces_in {
	}

	chain mwan3_custom_ipv6 {
		xt match "set" counter packets 0 bytes 0 xt target "MARK"
	}

	chain mwan3_connected_ipv6 {
		xt match "set" counter packets 27 bytes 4647 xt target "MARK"
	}

	chain mwan3_dynamic_ipv6 {
		xt match "set" counter packets 0 bytes 0 xt target "MARK"
	}

	chain mwan3_rules {
		meta mark & 0x00003f00 == 0x00000000 counter packets 226488 bytes 27019939 jump mwan3_policy_balanced
	}

	chain mwan3_hook {
		meta l4proto ipv6-icmp xt match "icmp6" counter packets 9642 bytes 537616 return
		meta l4proto ipv6-icmp xt match "icmp6" counter packets 0 bytes 0 return
		meta l4proto ipv6-icmp xt match "icmp6" counter packets 8108 bytes 583584 return
		meta l4proto ipv6-icmp xt match "icmp6" counter packets 0 bytes 0 return
		meta l4proto ipv6-icmp xt match "icmp6" counter packets 0 bytes 0 return
		meta mark & 0x00003f00 == 0x00000000 counter packets 4956595 bytes 2205054895 xt target "CONNMARK"
		meta mark & 0x00003f00 == 0x00000000 counter packets 226515 bytes 27024586 jump mwan3_ifaces_in
		meta mark & 0x00003f00 == 0x00000000 counter packets 226515 bytes 27024586 jump mwan3_custom_ipv6
		meta mark & 0x00003f00 == 0x00000000 counter packets 226515 bytes 27024586 jump mwan3_connected_ipv6
		meta mark & 0x00003f00 == 0x00000000 counter packets 226488 bytes 27019939 jump mwan3_dynamic_ipv6
		meta mark & 0x00003f00 == 0x00000000 counter packets 226488 bytes 27019939 jump mwan3_rules
		counter packets 5038913 bytes 2211548951 xt target "CONNMARK"
		meta mark & 0x00003f00 != 0x00003f00 counter packets 5038877 bytes 2211543152 jump mwan3_custom_ipv6
		meta mark & 0x00003f00 != 0x00003f00 counter packets 5038877 bytes 2211543152 jump mwan3_connected_ipv6
		meta mark & 0x00003f00 != 0x00003f00 counter packets 5038877 bytes 2211543152 jump mwan3_dynamic_ipv6
	}

	chain PREROUTING {
		type filter hook prerouting priority mangle; policy accept;
		counter packets 1142725 bytes 294355546 jump mwan3_hook
	}

	chain OUTPUT {
		type route hook output priority mangle; policy accept;
		counter packets 3913938 bytes 1918314605 jump mwan3_hook
	}

	chain mwan3_policy_balanced {
		meta mark & 0x00003f00 == 0x00000000 xt match "comment" counter packets 59660 bytes 7660461 xt target "MARK"
	}
}
# Warning: table ip filter is managed by iptables-nft, do not touch!
table ip filter {
	chain DOCKER-USER {
		iifname "eth0.6" oifname "docker0" counter packets 0 bytes 0 xt target "REJECT"
		counter packets 348207451 bytes 278377846352 return
	}

	chain DOCKER {
	}

	chain DOCKER-ISOLATION-STAGE-1 {
		iifname "docker0" oifname != "docker0" counter packets 0 bytes 0 jump DOCKER-ISOLATION-STAGE-2
		counter packets 348207465 bytes 278377847222 return
	}

	chain DOCKER-ISOLATION-STAGE-2 {
		oifname "docker0" counter packets 0 bytes 0 drop
		counter packets 0 bytes 0 return
	}

	chain FORWARD {
		type filter hook forward priority filter; policy accept;
		counter packets 348207451 bytes 278377846352 jump DOCKER-USER
		counter packets 348207454 bytes 278377846562 jump DOCKER-ISOLATION-STAGE-1
		oifname "docker0" xt match "conntrack" counter packets 0 bytes 0 accept
		oifname "docker0" counter packets 0 bytes 0 jump DOCKER
		iifname "docker0" oifname != "docker0" counter packets 0 bytes 0 accept
		iifname "docker0" oifname "docker0" counter packets 0 bytes 0 accept
		ip saddr 100.68.0.0/16 ip daddr 0.0.0.0/0 accept
		ip saddr 0.0.0.0/0 ip daddr 100.68.0.0/16 accept
	}
}
# Warning: table ip nat is managed by iptables-nft, do not touch!
table ip nat {
	chain DOCKER {
		iifname "docker0" counter packets 0 bytes 0 return
	}

	chain POSTROUTING {
		type nat hook postrouting priority srcnat; policy accept;
		oifname != "docker0" ip saddr 172.17.0.0/16 counter packets 0 bytes 0 xt target "MASQUERADE"
	}

	chain PREROUTING {
		type nat hook prerouting priority dstnat; policy accept;
		xt match "addrtype" counter packets 3573390 bytes 254760015 jump DOCKER
	}

	chain OUTPUT {
		type nat hook output priority -100; policy accept;
		ip daddr != 127.0.0.0/8 xt match "addrtype" counter packets 9 bytes 1260 jump DOCKER
	}
}
table ip netbird-rt {
	chain netbird-rt-fwd {
		type filter hook forward priority -99; policy accept;
		ip saddr 192.168.142.0/24 ip daddr 100.68.0.0/16 counter packets 44563593 bytes 6934259423 accept
		ip saddr 100.68.0.0/16 ip daddr 192.168.142.0/24 counter packets 44279263 bytes 8430392974 accept
		ct state ! established,related counter packets 984277 bytes 143888781 accept
	}

	chain netbird-rt-nat {
		type nat hook postrouting priority srcnat - 1; policy accept;
	}
}
table ip6 netbird-rt {
	chain netbird-rt-fwd {
		type filter hook forward priority -99; policy accept;
		ct state ! established,related counter packets 1 bytes 56 accept
	}

	chain netbird-rt-nat {
		type nat hook postrouting priority srcnat - 1; policy accept;
	}
}
table ip netbird-acl {
	set nb0000001 {
		type ipv4_addr
		flags dynamic
		elements = { 0.0.0.0 }
	}

	set nb0000002 {
		type ipv4_addr
		flags dynamic
		elements = { 0.0.0.0 }
	}

	chain netbird-acl-input-filter {
		type filter hook input priority filter; policy accept;
		iifname "wt0" accept
		iifname "wt0" ip saddr != 100.68.0.0/16 accept
		iifname "wt0" drop
	}

	chain netbird-acl-output-filter {
		type filter hook output priority filter; policy accept;
		oifname "wt0" accept
		oifname "wt0" ip daddr != 100.68.0.0/16 accept
		oifname "wt0" drop
	}
}